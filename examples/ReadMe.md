# CRS examples

This directory contains PROJJSON examples generated by the following commands:

```shell
projinfo EPSG:4171 -o PROJJSON > EPSG_4171.json
projinfo EPSG:2154 -o PROJJSON > EPSG_2154.json
```

Then, the files were edited manually for applying the rules documented
in [OGC 24-017 — Best Practice for OGC - UML to JSON Encoding Rules](https://portal.ogc.org/files/?artifact_id=108010&version=1).
The following OGC 24-017 clauses are of particular relevance to a JSON encoding of ISO 19111:

* §7.3.3.1 — Mapping from ISO 19103 basic types to JSON: `string` `number`, `date`, unit of measurement, _etc._
* §7.3.3.4 — Inheritance (rules applying to the schema but invisible in a CRS instance)
* §7.3.3.9 — Basic types (rules applying to the schema but invisible in a CRS instance)
* §7.3.4   — Properties
* §7.4     — Plain encoding
* §7.8     — By-reference encoding of property values
* §7.9     — Encoding of union types
* §7.10.3  — Encoding for code lists literal
* §7.11    — Encoding of an additional `entityType` property

The following clauses may be ignored as they apply to features not used by ISO 19111.
Note that the encoding of geometries is covered by §7.4.2.

* §7.3.5 — Association class
* §7.5   — GeoJSON formats
* §7.6   — GeoJSON encoding
* §7.7   — JSON-FG encoding ("FG" stands for "Feature Geometry")

The changes between the modified JSON and the original PROJJSON can be seen in
[Git history](https://github.com/Geomatys/CRS-JSON-Encoding/commit/0e9aaecd207b5e0a95a426be77cd640bc2fd02cf).

## Notes on some changes compared to PROJJSON

The most significant changes implied by OGC 24-017 is the replacement of `"type"` and `"subtype"` by `"entityType"`.
Other changes are more a consequence of compliance with ISO 19111 rather than changes mandated by OGC 24-017.

### Changes that are not real
The differences between PROJJSON and the edited files give the impression that new elements were added for
`"minimumValue"`, `"maximumValue"`and `"rangeMeaning"`, and that `identifier` has been changed from a singleton to an array.
But actually, PROJJSON already allows those properties. They were just not used in the PROJJSON output.


### Ignoreable changes
The PROJJSON elements do not appear in the same order as in the UML.
The examples in this directory keep elements in the same order as PROJJSON for making comparisons easier.
New elements are added, which make the JSON looks more verbose,
but some of these new elements, such as `"alias"`,  are optional.

PROJJSON uses snake-case, while UML, OGC 24-017 and json-schema.org use camel-case.
Furthermore, the identifiers (ignoring case) used in PROJJSON do not always match the UML identifiers.
The examples in this directory use UML identifiers, including their camel case.
Such renaming is not mandatory, this is only an experiment.
Note: PROJJSON uses the plural form for arrays, which may be something good to replicate even if UML identifiers are used.

### Units of measurement
While OGC 24-017 uses [Unified Code for Units of Measure](https://ucum.org/) (UCUM) in its example,
it does not contain a formal requirement to use UCUM.
The examples in this directory use UCUM symbols for parameter values.
UCUM symbols are "deg" for angular degrees and "m" for meter
(see [Table of Example UCUM codes for Electronic Messaging](https://github.com/ucum-org/ucum/blob/main/common-units/TableOfExampleUcumCodesForElectronicMessagingwithPreface.pdf)).

**Notes:** we have not verified if all foot variants can be encoded in UCUM.
In addition, year does not seem to be defined precisely in UCUM
(by contrast, EPSG uses a specific definition of tropical year).
The "conversion to base unit" factor may be needed but has not been added yet in the examples.

### Structural changes
The following elements are structured differently in ISO 19111 compared to WKT 2 / PROJJSON.
Those changes are more significant than only element renaming:

* The way that coordinate system types are identified
* The structure where scope and geographic/vertical/temporal extents are stored.
* The structure of identifiers.
